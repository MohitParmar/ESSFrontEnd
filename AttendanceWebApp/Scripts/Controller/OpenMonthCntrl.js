var app = angular.module("myApp", ["angularUtils.directives.dirPagination"]); app.controller("OpenMonthController", function ($scope, $http) {
    $http.defaults.headers.common.Authorization = "Basic " + $("#myEmpUnqId").val(), $scope.currentPage = 1, $scope.itemsPerPage = 10, $scope.alluserlist = [];
    var url_string = window.location.href, url = new URL(url_string), urlhost = url.hostname, urlprotocol = url.protocol; var url_port = url.port;
    $scope._Conpath = ''; var loc = $("#myLoc").val();
    $(document).ready(function () {
        "undefined" != typeof _ConPath && (urlhost === _URLHostName ? $scope._Conpath = _ConPath : $scope._Conpath = urlprotocol + "//" + urlhost + "/api/")
    });
    jQuery.support.cors = !0, $scope.ChangeOpenMonth = function (openMonth) { var yearmonth, opmnth = openMonth.yearMonth, d = new Date(opmnth); yearmonth = d.getMonth() + 1 < "10" ? d.getFullYear() + "0" + (d.getMonth() + 1) : d.getFullYear().toString() + (d.getMonth() + 1); var opm = new XMLHttpRequest; opm.open("POST", $scope._Conpath + "OpenMonth/ChangeOpenMonth?yearMonth=" + yearmonth, !0), opm.setRequestHeader("Content-type", "application/json"), opm.onreadystatechange = function () { 4 === opm.readyState && 200 === opm.status ? ($scope.GetOpenMonth(), document.getElementById("MessageBox").innerHTML = "<div class='alert alert-success alert-dismissable'><a href='#' class='close' data-dismiss='alert' aria-label='close'>&times;</a><strong>Open Month Changed Successfully.. </strong></div>", $("#MessageBox").show(), document.getElementById("openMonth").value = "") : 400 === opm.status && (document.getElementById("MessageBox").innerHTML = "<div class='alert alert-danger alert-dismissable'><a href='#' class='close' data-dismiss='alert' aria-label='close'>&times;</a><strong>Open Month not Changed.. </strong></div>", $("#MessageBox").show(), document.getElementById("openMonth").value = "") }, opm.send() }, $scope.GetOpenMonth = function () { const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]; var mon = new XMLHttpRequest; mon.open("GET", $scope._Conpath + "OpenMonth/GetOpenMonth", !0), mon.setRequestHeader("Content-type", "application/json"), mon.onreadystatechange = function () { if (4 === mon.readyState && 200 === mon.status) { var msg = mon.responseText, pretemp = msg.slice(1, 11), p = pretemp.split("-"), pdate = new Date(p[0], p[1] - 1, p[2]), pdate1 = monthNames[pdate.getMonth()]; document.getElementById("CurOpenMonth").innerHTML = "<div><h3>Current Open Month is : " + pdate1 + ", " + pdate.getFullYear() + "</h3></div>" } }, mon.send() }, $scope.sort = function (keyname) { $scope.sortKey = keyname, $scope.reverse = !$scope.reverse }
}), app.directive("datepicker", function () { return { restrict: "A", require: "ngModel", link: function (scope, elem, attrs, ngModelCtrl) { var updateModel = function (dateText) { scope.$apply(function () { ngModelCtrl.$setViewValue(dateText) }) }, options = { dateFormat: "yy-mm-dd", onSelect: function (dateText) { updateModel(dateText) } }; elem.datepicker(options) } } });